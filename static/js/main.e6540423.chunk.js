(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{28:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(1),o=a.n(n),c=a(21),s=a.n(c),l=(a(28),a(4)),i=a.n(l),u=a(6),m=a(5),d=a(7),h=a(8),g=a(10),p=a(9),b=(a(30),a(31),function(e){var t=e.onSubmit,a=e.value,n=e.onInput;return Object(r.jsx)("header",{className:"Searchbar",children:Object(r.jsxs)("form",{onSubmit:t,className:"SearchForm",children:[Object(r.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(r.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(r.jsx)("input",{onChange:n,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:a})]})})}),f=(a(32),a(33),function(e){var t=e.smallImageUrl,a=e.bigImageUrl,n=e.imageAlt,o=e.openModal;return Object(r.jsx)("li",{className:"ImageGalleryItem",children:Object(r.jsx)("img",{onClick:o,"data-big":a,src:t,alt:n,className:"ImageGalleryItem-image"})})}),j=function(e){var t=e.galleryItems,a=e.showImage;return Object(r.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(r.jsx)(f,{smallImageUrl:e.smallImageUrl,bigImageUrl:e.bigImageUrl,imageAlt:e.imageAlt,openModal:a},e.imageId)}))})},v=(a(34),function(e){var t=e.handleClick;return Object(r.jsx)("button",{onClick:t,className:"Button",children:"Load More"})}),O=a(12),y=a.n(O);function w(e,t,a){return y.a.get("?q=".concat(e,"&page=").concat(t,"&key=").concat("19525294-22d6d1e180bf9905034ff3396","&image_type=photo&orientation=horizontal&per_page=").concat(a))}y.a.defaults.baseURL="https://pixabay.com/api/";var x=a(22),I=a.n(x),S=(a(74),function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(d.a)(this,a),(r=t.call(this,e)).closeByEscape=function(e){"Escape"===e.code&&r.props.closeModal()},r.closeByOverlay=function(e){"IMG"!==e.target.nodeName&&r.props.closeModal()},r.state={reset:!1},r}return Object(h.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.closeByEscape),document.querySelector(".Overlay").addEventListener("click",this.closeByOverlay),document.querySelector("body").style.overflow="hidden"}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.closeByEscape),document.querySelector(".Overlay").removeEventListener("click",this.closeByOverlay),document.querySelector("body").style.overflow="unset",this.setState({reset:!0})}},{key:"render",value:function(){return Object(r.jsx)("div",{className:"Overlay",children:Object(r.jsx)("div",{className:"Modal",children:Object(r.jsx)("img",{src:this.state.reset?"":this.props.source,alt:this.state.reset?"":this.props.name})})})}}]),a}(n.Component)),N=function(e){Object(g.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(d.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={perPage:12,pageNumber:1,inputValue:"",images:[],error:!1,errorMessage:"",warning:!1,modal:!1,modalSrc:"",loader:!1},e.handleInput=function(t){var a=t.target;e.setState({inputValue:a.value})},e.handleSubmit=function(){var t=Object(m.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault();try{e.loadImages(!0).then((function(t){t.length?e.setState({pageNumber:2,images:Object(u.a)(t),warning:!1,loader:!1,inputValue:""}):e.setState({warning:!0,images:[],loader:!1})}))}catch(r){e.setState({error:!0,errorMessage:r.message})}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadImages=function(){var t=Object(m.a)(i.a.mark((function t(a){var r,n,o,c,s,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.inputValue){t.next=12;break}return e.setState({loader:!0}),r=e.state,n=r.inputValue,o=r.pageNumber,c=r.perPage,a&&(o=1),t.next=6,w(n,o,c);case 6:return s=t.sent,l=[],s.data.hits.forEach((function(e){var t=e.id,a=e.largeImageURL,r=e.webformatURL,n=e.tags;l=[].concat(Object(u.a)(l),[{imageId:t,bigImageUrl:a,smallImageUrl:r,imageAlt:n}])})),t.abrupt("return",l);case 12:return t.abrupt("return",[]);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadMore=Object(m.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.loadImages(!1).then(function(){var t=Object(m.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState((function(e){return{pageNumber:e.pageNumber+1,images:[].concat(Object(u.a)(e.images),Object(u.a)(a)),loader:!1}})),e.scrollWindow();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}catch(a){e.setState({error:!0,errorMessage:a.message})}case 1:case"end":return t.stop()}}),t)}))),e.openImage=function(t){var a=t.target;e.setState({modal:!0,modalSrc:a.dataset.big})},e.closeModal=function(){e.setState({modal:!1})},e.scrollWindow=function(){window.scrollTo({top:document.documentElement.scrollHeight-965,behavior:"smooth"})},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.state,t=e.inputValue,a=e.images,n=e.error,o=e.errorMessage,c=e.warning,s=e.modal,l=e.modalSrc,i=e.loader;return n?Object(r.jsx)("h1",{className:"message",children:o}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b,{value:t,onSubmit:this.handleSubmit,onInput:this.handleInput}),c&&Object(r.jsx)("h1",{className:"message",children:"No results for this search were found."}),Object(r.jsx)(j,{galleryItems:a,showImage:this.openImage,modalBool:s,closeModal:this.closeModal,modalSrc:l}),!i&&!!a.length&&a.length%12===0&&Object(r.jsx)(v,{handleClick:this.loadMore}),i&&Object(r.jsx)("div",{className:"center",children:Object(r.jsx)(I.a,{type:"ThreeDots",color:"#3f51b5",height:200,width:200})}),s&&Object(r.jsx)(S,{source:l,closeModal:this.closeModal,name:l})]})}}]),a}(n.Component);s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(N,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.e6540423.chunk.js.map